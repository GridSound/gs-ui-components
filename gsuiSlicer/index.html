<style>
body {
	--test-bg-color: #506;
	--test-bg-color: #916;
	--test-content-w: 380px;
	--test-content-h: 420px;
}
</style>

<gsui-slicer duration="8" timedivision="4/4" cropa=".143" cropb=".6"></gsui-slicer>

<script>
TEST( {
	deps: [
		"gsuiIcon",
		"gsuiBeatlines",
		"gsuiWaveform",
	],
	cssFiles: [
		"gsuiDragshield/gsuiDragshield.css",
		"gsuiIcon/gsuiIcon.css",
		"gsuiBeatlines/gsuiBeatlines.css",
		"gsuiSlider/gsuiSlider.css",
		"gsuiSlicer/gsuiSlicer.colors.default.css",
		"gsuiSlicer/gsuiSlicer.css",
	],
	jsFiles: [
		"gsuiDragshield/gsuiDragshield.js",
		"gsuiWaveform/gsuiWaveform.js",
		"gsuiWaveform/gsuiWaveform.draw.js",
		"gsuiBeatlines/gsuiBeatlines.js",
		"gsuiSlider/gsuiSlider.html.js",
		"gsuiSlider/gsuiSlider.js",
		"gsuiSlicer/gsuiSlicer.html.js",
		"gsuiSlicer/gsuiSlicer.js",
	],
	js: () => {
		const slicer = document.querySelector( "gsui-slicer" );

		// slicer.addSlice( "s0", .0,  .0, 1/4/4 );
		// slicer.addSlice( "s1", 1/4/4, 1/4/4, 1/4/4 );
		// slicer.addSlice( "s2", 1/4/4*2, 1/4/4*2, 1/4/4 );
		// slicer.addSlice( "s3", 1/4/4*3, 1/4/4*3, 1/4/4 );
		// slicer.addSlice( "s4", .25, .25, .25 );
		// slicer.addSlice( "s5", .50, .50, .25 );
		// slicer.addSlice( "s6", .75, .75, .25 );

		slicer.addSlice( "s0", { x: .0, y: .0, w: .5 } );
		slicer.addSlice( "s1", { x: .5, y: .5, w: .5 } );

		slicer.setBufferName( "my-super-sample" );

		document.body.onclick = () => {
			const ctx = new AudioContext();

			document.body.onclick = null;
			fetch( "test-assets/okay.wav" )
				.then( res => res.arrayBuffer() )
				.then( arr => ctx.decodeAudioData( arr ) )
				.then( buf => slicer.setBuffer( buf ) );
		};
	},
} );
</script>
