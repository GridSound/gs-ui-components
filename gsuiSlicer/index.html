<style>
body {
	--test-bg-color: #506;
	--test-bg-color: #916;
	--test-content-w: 380px;
	--test-content-h: 420px;
}
</style>

<gsui-slicer duration="8" timedivision="4/4" cropa=".143" cropb=".6"></gsui-slicer>

<script>
TEST( {
	deps: [
		"gsuiIcon",
		"gsuiBeatlines",
		"gsuiWaveform",
	],
	cssFiles: [
		"gsuiDragshield/gsuiDragshield.css",
		"gsuiIcon/gsuiIcon.css",
		"gsuiBeatlines/gsuiBeatlines.css",
		"gsuiSlider/gsuiSlider.css",
		"gsuiSlicer/gsuiSlicer.colors.default.css",
		"gsuiSlicer/gsuiSlicer.css",
	],
	jsFiles: [
		"gsuiDragshield/gsuiDragshield.js",
		"gsuiWaveform/gsuiWaveform.js",
		"gsuiWaveform/gsuiWaveform.draw.js",
		"gsuiBeatlines/gsuiBeatlines.js",
		"gsuiSlider/gsuiSlider.html.js",
		"gsuiSlider/gsuiSlider.js",
		"gsuiSlicer/gsuiSlicer.html.js",
		"gsuiSlicer/gsuiSlicer.js",
	],
	js: () => {
		const slicer = document.querySelector( "gsui-slicer" );

		slicer.addSlice( 0, { x: .0, y: .0, w: 1/4/4 } );
		slicer.addSlice( 1, { x: 1/4/4, y: 1/4/4, w: 1/4/4 } );
		slicer.addSlice( 2, { x: 1/4/4*2, y: 1/4/4*2, w: 1/4/4 } );
		slicer.addSlice( 3, { x: 1/4/4*3, y: 1/4/4*3, w: 1/4/4 } );
		slicer.addSlice( 4, { x: .25, y: .25, w: .25 } );
		slicer.addSlice( 5, { x: .50, y: .50, w: .25 } );
		slicer.addSlice( 6, { x: .75, y: .75, w: .25 } );

		// slicer.addSlice( 0, { x: .0, y: .0, w: .5 } );
		// slicer.addSlice( 1, { x: .5, y: .5, w: .5 } );

		slicer.setBufferName( "my-super-sample" );

		document.body.onclick = () => {
			const ctx = new AudioContext();

			document.body.onclick = null;
			fetch( "test-assets/okay.wav" )
				.then( res => res.arrayBuffer() )
				.then( arr => ctx.decodeAudioData( arr ) )
				.then( buf => slicer.setBuffer( buf ) );
		};
	},
} );
</script>
